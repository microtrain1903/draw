var favStrokeStyle="",favfillStyle="",draw=function(){var e=0,t=document.querySelector("main").offsetWidth,n=document.querySelector("main").offsetHeight,l=document.createElement("canvas"),a=l.getContext("2d"),r=l.getBoundingClientRect(),i=0,c=0,o=0,d=0,s=0,u=0;return lx=!1,ly=!1,isDrawing=!1,shape="",{setIsDrawing:function(e){isDrawing=e},getIsDrawing:function(){return isDrawing},setShape:function(e){shape=e},getShape:function(){return shape},draw:function(){a.restore(),"rectangle"===shape?this.drawRect():"line"===shape?this.drawLine():"circle"===shape?this.drawCircle():"path"===shape?this.drawPath():"triangle"===shape?this.drawTriangle():"flower"===shape?this.drawFlower():alert("Please choose a shape"),a.save()},setXY:function(e){lx=i,ly=c,i=e.clientX-r.left-l.offsetLeft,c=e.clientY-r.top-l.offsetTop},writeXY:function(){document.getElementById("trackX").innerHTML="X: "+i,document.getElementById("trackY").innerHTML="Y: "+c},setStart:function(){o=i,d=c},setEnd:function(){s=i,u=c},drawRect:function(){a.fillStyle=checkFill(),a.strokeStyle=checkStyle(),a.fillRect(o,d,s-o,u-d)},drawLine:function(){a.strokeStyle=checkStyle(),a.beginPath(),a.moveTo(o,d),a.lineTo(s,u),a.stroke()},drawCircle:function(){a.strokeStyle=checkStyle(),a.fillStyle=checkFill();let e=o-s,t=d-u,n=Math.sqrt(e*e+t*t);a.beginPath(),a.arc(o,d,n/2,0,2*Math.PI),a.stroke(),a.fill()},drawPath:function(){a.strokeStyle=checkStyle(),a.beginPath(),a.moveTo(lx,ly),a.lineTo(i,c),a.stroke()},drawTriangle:function(){a.fillStyle=checkFill(),a.strokeStyle=checkStyle(),0==e?(a.beginPath(),a.moveTo(i,c),e++):1==e?(a.lineTo(i,c),e++):2==e&&(a.lineTo(i,c),a.closePath(),a.stroke(),e=0,a.fill())},drawFlower:function(){a.strokeStyle=checkStyle(),0==e?(a.beginPath(),a.moveTo(i,c),e++):1==e?a.lineTo(i,c):2==e&&(a.lineTo(i,c),a.closePath(),a.stroke(),e=0),e++},getCanvas:function(){return l},init:function(){l.width=t,l.height=n,document.querySelector("main").appendChild(l)}}}();draw.init(),draw.getCanvas().addEventListener("mousemove",function(e){draw.setXY(e),draw.writeXY(),"path"==draw.getShape()&&!0===draw.getIsDrawing()&&draw.draw()},!1),draw.getCanvas().addEventListener("mousedown",function(){draw.setStart(),draw.setIsDrawing(!0)},!1),draw.getCanvas().addEventListener("mouseup",function(){draw.setEnd(),draw.draw(),draw.setIsDrawing(!1)},!1),document.getElementById("btnRect").addEventListener("click",function(){draw.setShape("rectangle")},!1),document.getElementById("btnLine").addEventListener("click",function(){draw.setShape("line")},!1),document.getElementById("btnCircle").addEventListener("click",function(){draw.setShape("circle")},!1),document.getElementById("btnPath").addEventListener("click",function(){draw.setShape("path")},!1),document.getElementById("btnTriangle").addEventListener("click",function(){draw.setShape("triangle"),count=0},!1),document.getElementById("btnFlower").addEventListener("click",function(){draw.setShape("flower"),count=0},!1),document.getElementById("favFillStyle").addEventListener("click",function(){favFillStyle=document.getElementById("favFillStyle").value},!1),document.getElementById("favStrokeStyle").addEventListener("click",function(){favStrokeStyle=document.getElementById("favStrokeStyle").value},!1);var randomFillStyle=!0,randomStrokeStyle=!0;function checkFill(){return 1==randomFillStyle?"#"+Math.floor(16777215*Math.random()).toString(16):favFillStyle}function checkStyle(){return 1==randomStrokeStyle?"#"+Math.floor(16777215*Math.random()).toString(16):favStrokeStyle}document.getElementById("checkFillStyle").addEventListener("click",function(){randomFillStyle=0==document.getElementById("checkFillStyle").checked},!1),document.getElementById("checkStrokeStyle").addEventListener("click",function(){randomStrokeStyle=0==document.getElementById("checkStrokeStyle").checked},!1);